"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[5546],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>f});var r=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var s=r.createContext({}),c=function(e){var t=r.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},d=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),p=c(a),f=n,h=p["".concat(s,".").concat(f)]||p[f]||u[f]||o;return a?r.createElement(h,i(i({ref:t},d),{},{components:a})):r.createElement(h,i({ref:t},d))}));function f(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,i=new Array(o);i[0]=p;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:n,i[1]=l;for(var c=2;c<o;c++)i[c]=a[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,a)}p.displayName="MDXCreateElement"},5944:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var r=a(7462),n=(a(7294),a(3905));const o={sidebar_position:6,sidebar_label:"Fast Failover"},i="Application Fast Failover",l={unversionedId:"quick_start/advanced_features/fast_failover",id:"quick_start/advanced_features/fast_failover",title:"Application Fast Failover",description:"When the stateful application (i.e. Pod with HwameiStor volume) runs into a problem, especially caused by the node issue,",source:"@site/docs/quick_start/advanced_features/fast_failover.md",sourceDirName:"quick_start/advanced_features",slug:"/quick_start/advanced_features/fast_failover",permalink:"/docs/quick_start/advanced_features/fast_failover",draft:!1,editUrl:"https://github.com/hwameistor/hwameistor/edit/main/docs/docs/quick_start/advanced_features/fast_failover.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6,sidebar_label:"Fast Failover"},sidebar:"tutorialSidebar",previous:{title:"Volume Snapshot",permalink:"/docs/quick_start/advanced_features/volume_snapshot"},next:{title:"System Audit",permalink:"/docs/quick_start/advanced_features/system_audit"}},s={},c=[],d={toc:c};function u(e){let{components:t,...a}=e;return(0,n.kt)("wrapper",(0,r.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"application-fast-failover"},"Application Fast Failover"),(0,n.kt)("p",null,"When the stateful application (i.e. Pod with HwameiStor volume) runs into a problem, especially caused by the node issue,\nit's important to reschedule the Pod to another health node and keep running."),(0,n.kt)("p",null,"However, due to the design of the Kubernetes' StatefulSet and Deployment,\nit will wait a long time (e.g. 5 mins) before rescheduling the Pod.\nEspecially, it will never reschedule the Pod automatically for the StatefulSet Pod.\nThis will cause the application stop, and even cause a huge business loss."),(0,n.kt)("p",null,"HwameiStor provides a feature of fast failover to solve this problem. When identifying the application issue,\nit will reschedule the Pod immediately without waiting for a very long time.\nHwameiStor will fail the Pod over to another health node, and ensure the required data volumes are also located at the node.\nSo, the application can continue to work. "),(0,n.kt)("h1",{id:"how-to-use"},"How to use"),(0,n.kt)("p",null,"HwameiStor provides the fast failover considering the two cases:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Node Failure  "),(0,n.kt)("p",{parentName:"li"},"When a node fails, all the Pods on this node can't work any more\u3002As to the Pod using HwameiStor volume\uff0c\nit's necessary to reschedule to another health node with the associated data volume replica.\nUser can trigger the fast failover for this node by:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre"},"Add a label to this node:\n\nkubectl label node <nodeName> hwameistor.io/failover=start\n\nWhen the fast failover completes, the label will be modified as:\n\nhwameistor.io/failover=completed\n"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Pod Failure"),(0,n.kt)("p",{parentName:"li"},"When a Pod fails, user can trigger the fast failover for it by:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre"},"Add a lable to this Pod:\n\nkubectl label pod <podName> hwameistor.io/failover=start\n\nWhen the fast failover completes, the old Pod will be deleted and then the new one will be created on a new node.\n")))))}u.isMDXComponent=!0}}]);