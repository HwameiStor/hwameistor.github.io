"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2748],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>d});var n=a(7294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var i=n.createContext({}),m=function(e){var t=n.useContext(i),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},u=function(e){var t=m(e.components);return n.createElement(i.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,r=e.originalType,i=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=m(a),d=o,v=p["".concat(i,".").concat(d)]||p[d]||c[d]||r;return a?n.createElement(v,l(l({ref:t},u),{},{components:a})):n.createElement(v,l({ref:t},u))}));function d(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=a.length,l=new Array(r);l[0]=p;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s.mdxType="string"==typeof e?e:o,l[1]=s;for(var m=2;m<r;m++)l[m]=a[m];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}p.displayName="MDXCreateElement"},9266:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>i,contentTitle:()=>l,default:()=>c,frontMatter:()=>r,metadata:()=>s,toc:()=>m});var n=a(7462),o=(a(7294),a(3905));const r={sidebar_position:1,sidebar_label:"LVM Volume"},l="LVM Volume",s={unversionedId:"volumes_and_nodes/create_hwameistor_volumes/lvm_volumes",id:"volumes_and_nodes/create_hwameistor_volumes/lvm_volumes",title:"LVM Volume",description:"HwameiStor provides LVM-based data volumes,",source:"@site/docs/volumes_and_nodes/create_hwameistor_volumes/lvm_volumes.md",sourceDirName:"volumes_and_nodes/create_hwameistor_volumes",slug:"/volumes_and_nodes/create_hwameistor_volumes/lvm_volumes",permalink:"/docs/volumes_and_nodes/create_hwameistor_volumes/lvm_volumes",draft:!1,editUrl:"https://github.com/hwameistor/hwameistor/edit/main/docs/docs/volumes_and_nodes/create_hwameistor_volumes/lvm_volumes.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,sidebar_label:"LVM Volume"},sidebar:"tutorialSidebar",previous:{title:"Create Hwameistor Volumes",permalink:"/docs/category/create-hwameistor-volumes"},next:{title:"Disk Volume",permalink:"/docs/volumes_and_nodes/create_hwameistor_volumes/disk_volumes"}},i={},m=[{value:"Steps",id:"steps",level:2},{value:"1. Prepare LVM Storage Node",id:"1-prepare-lvm-storage-node",level:3},{value:"2. Prepare StorageClass",id:"2-prepare-storageclass",level:3},{value:"3. Create Volume",id:"3-create-volume",level:3},{value:"4. Use Volume",id:"4-use-volume",level:3}],u={toc:m};function c(e){let{components:t,...a}=e;return(0,o.kt)("wrapper",(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"lvm-volume"},"LVM Volume"),(0,o.kt)("p",null,"HwameiStor provides LVM-based data volumes,\nwhich offer read and write performance comparable to that of native disks.\nThese data volumes also provide advanced features such as data volume expansion, migration, high availability, and more."),(0,o.kt)("p",null,"The following example demonstrates how to create a simple non-HA type data volume."),(0,o.kt)("h2",{id:"steps"},"Steps"),(0,o.kt)("h3",{id:"1-prepare-lvm-storage-node"},"1. Prepare LVM Storage Node"),(0,o.kt)("p",null,"Ensure that the storage node has sufficient available capacity. If there is not enough capacity,\nplease refer to ",(0,o.kt)("a",{parentName:"p",href:"/docs/volumes_and_nodes/node_expansion/lvm_nodes"},"Expanding LVM Storage Nodes"),"."),(0,o.kt)("p",null,"Check for available capacity using the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-console"},"$ kubectl get loalstoragenodes k8s-worker-2 -oyaml | grep freeCapacityBytes\nfreeCapacityBytes: 10523508736\n")),(0,o.kt)("h3",{id:"2-prepare-storageclass"},"2. Prepare StorageClass"),(0,o.kt)("p",null,"Create a StorageClass named ",(0,o.kt)("inlineCode",{parentName:"p"},"hwameistor-storage-lvm-ssd")," using the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-console"},'$ cat << EOF | kubectl apply -f - \napiVersion: storage.k8s.io/v1\nkind: StorageClass\nmetadata:  \n  name: hwameistor-storage-lvm-ssd \nparameters:\n  convertible: "false"\n  csi.storage.k8s.io/fstype: xfs\n  poolClass: SSD\n  poolType: REGULAR\n  replicaNumber: "1"\n  striped: "true"\n  volumeKind: LVM\nprovisioner: lvm.hwameistor.io\nreclaimPolicy: Delete\nvolumeBindingMode: WaitForFirstConsumer\nallowVolumeExpansion: true\nEOF \n')),(0,o.kt)("h3",{id:"3-create-volume"},"3. Create Volume"),(0,o.kt)("p",null,"Create a PVC named ",(0,o.kt)("inlineCode",{parentName:"p"},"hwameistor-lvm-volume")," using the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-console"},"$ cat << EOF | kubectl apply -f -\napiVersion: v1\nkind: PersistentVolumeClaim\nmetadata:\n  name: hwameistor-lvm-volume\nspec:\n  accessModes:\n  - ReadWriteOnce\n  resources:\n    requests:\n      storage: 1Gi\n  storageClassName: hwameistor-storage-lvm-ssd\nEOF\n")),(0,o.kt)("h3",{id:"4-use-volume"},"4. Use Volume"),(0,o.kt)("p",null,"Create an nginx application and use ",(0,o.kt)("inlineCode",{parentName:"p"},"hwameistor-lvm-volume")," volume using the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-console"},"$ cat << EOF | kubectl apply -f -\napiVersion: v1\nkind: Pod\nmetadata:\n  name: nginx\n  namespace: default\nspec:\n  containers:\n  - name: nginx\n    image: docker.io/library/nginx:latest\n    imagePullPolicy: IfNotPresent\n    volumeMounts:\n    - name: data\n      mountPath: /data\n    ports:\n    - containerPort: 80\n  volumes:\n  - name: data\n    persistentVolumeClaim:\n      claimName: hwameistor-lvm-volume\nEOF     \n")))}c.isMDXComponent=!0}}]);