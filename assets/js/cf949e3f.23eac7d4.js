"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7889],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>h});var i=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,i,a=function(e,t){if(null==e)return{};var r,i,a={},n=Object.keys(e);for(i=0;i<n.length;i++)r=n[i],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(i=0;i<n.length;i++)r=n[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=i.createContext({}),c=function(e){var t=i.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},p=function(e){var t=c(e.components);return i.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},d=i.forwardRef((function(e,t){var r=e.components,a=e.mdxType,n=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=c(r),h=a,m=d["".concat(l,".").concat(h)]||d[h]||u[h]||n;return r?i.createElement(m,o(o({ref:t},p),{},{components:r})):i.createElement(m,o({ref:t},p))}));function h(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var n=r.length,o=new Array(n);o[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,o[1]=s;for(var c=2;c<n;c++)o[c]=r[c];return i.createElement.apply(null,o)}return i.createElement.apply(null,r)}d.displayName="MDXCreateElement"},5290:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>n,metadata:()=>s,toc:()=>c});var i=r(7462),a=(r(7294),r(3905));const n={sidebar_position:8,sidebar_label:"PVC Autoresizing"},o="PVC Autoresizing",s={unversionedId:"quick_start/advanced_features/pvc_autoresizing",id:"quick_start/advanced_features/pvc_autoresizing",title:"PVC Autoresizing",description:"The component hwameistor-pvc-autoresizer provide the ability to autoresize pvc.The resize behavior is controlled by the crd resizepolicy.",source:"@site/docs/quick_start/advanced_features/pvc_autoresizing.md",sourceDirName:"quick_start/advanced_features",slug:"/quick_start/advanced_features/pvc_autoresizing",permalink:"/docs/quick_start/advanced_features/pvc_autoresizing",draft:!1,editUrl:"https://github.com/hwameistor/hwameistor/edit/main/docs/docs/quick_start/advanced_features/pvc_autoresizing.md",tags:[],version:"current",sidebarPosition:8,frontMatter:{sidebar_position:8,sidebar_label:"PVC Autoresizing"},sidebar:"tutorialSidebar",previous:{title:"System Audit",permalink:"/docs/quick_start/advanced_features/system_audit"},next:{title:"Uninstall",permalink:"/docs/quick_start/uninstall"}},l={},c=[{value:"ResizePolicy",id:"resizepolicy",level:2},{value:"Match Rules",id:"match-rules",level:2}],p={toc:c};function u(e){let{components:t,...r}=e;return(0,a.kt)("wrapper",(0,i.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"pvc-autoresizing"},"PVC Autoresizing"),(0,a.kt)("p",null,"The component hwameistor-pvc-autoresizer provide the ability to autoresize pvc.The resize behavior is controlled by the crd resizepolicy."),(0,a.kt)("h2",{id:"resizepolicy"},"ResizePolicy"),(0,a.kt)("p",null,"A example cr is as below:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: hwameistor.io/v1alpha1\nkind: ResizePolicy\nmetadata:\n  name: resizepolicy1\nspec:\n  warningThreshold: 60\n  resizeThreshold: 80\n  nodePoolUsageLimit: 90\n")),(0,a.kt)("p",null,"The warningThreshold,resizeThreshold,resizeThreshold three fields of type int all present a percentage.The resizeThreshold specifies the usage percentage of volume beyond which the resizing action will be triggered. The field warningThreshold is not relative with any warning action temporarily, it's just for the resize action that volume usage percentage is expected to under the warningThreshold after resize action done. The field nodePoolUsageLimit means a limit of pool usage percentage of localstoragenode, when a pool usage percentage reached this limit, the autoresizer will not do autoresizing for a volume located on the localstoragenode. "),(0,a.kt)("h2",{id:"match-rules"},"Match Rules"),(0,a.kt)("p",null,"This is a examle cr with label selectors."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: hwameistor.io/v1alpha1\nkind: ResizePolicy\nmetadata:\n  name: example-policy\nspec:\n  warningThreshold: 60\n  resizeThreshold: 80\n  nodePoolUsageLimit: 90\n  storageClassSelector:\n    matchLabels:\n      pvc-resize: auto\n  namespaceSelector:\n    matchLabels:\n      pvc-resize: auto\n  pvcSelector:\n    matchLabels:\n      pvc-resize: auto\n")),(0,a.kt)("p",null,"ResizePolicy have three label selectors. pvcSelector means pvc selected by the selector of the resizepolicy will autoresize according to the policy that select it. namespaceSelector means pvc in the namespace selected by the policy will autoresize according to the policy. storageClassSelector means pvc created from storageclass selected by the policy will autoresize according to the policy. It's a \"&&\" relation between the three selectors, if you specify more than one selector in a resizepolicy, the pvc match all the selector you specified will match this policy. If no selector specified in the resizepolicy, it's a cluster resizepolicy, it's like default policy for all pvc in the cluster."))}u.isMDXComponent=!0}}]);